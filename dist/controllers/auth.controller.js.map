{"version":3,"sources":["../../src/controllers/auth.controller.ts"],"sourcesContent":["import { NextFunction, Request, Response } from 'express';\nimport { CreateUserDto } from '@dtos/users.dto';\nimport { RequestWithUser } from '@interfaces/auth.interface';\nimport { User } from '@interfaces/users.interface';\nimport AuthService from '@services/auth.service';\n\nclass AuthController {\n  public authService = new AuthService();\n\n  public signUp = async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const userData: CreateUserDto = req.body;\n      const signUpUserData: User = await this.authService.signup(userData);\n\n      res.status(201).json({ data: signUpUserData, message: 'signup' });\n    } catch (error) {\n      next(error);\n    }\n  };\n\n  public logIn = async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const userData: CreateUserDto = req.body;\n      const { cookie, findUser } = await this.authService.login(userData);\n\n      res.setHeader('Set-Cookie', [cookie]);\n      res.status(200).json({ data: findUser, message: 'login' });\n    } catch (error) {\n      next(error);\n    }\n  };\n\n  public logOut = async (req: RequestWithUser, res: Response, next: NextFunction) => {\n    try {\n      const userData: User = req.user;\n      const logOutUserData: User = await this.authService.logout(userData);\n\n      res.setHeader('Set-Cookie', ['Authorization=; Max-age=0']);\n      res.status(200).json({ data: logOutUserData, message: 'logout' });\n    } catch (error) {\n      next(error);\n    }\n  };\n}\n\nexport default AuthController;\n"],"names":["AuthService","AuthController","authService","signUp","req","res","next","userData","signUpUserData","error","body","signup","status","json","data","message","logIn","cookie","findUser","login","setHeader","logOut","logOutUserData","user","logout"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,OAAOA,iBAAiB,yBAAyB;AAEjD,IAAA,AAAMC,iBAAN,SAAMA;;4BAAAA;IACJ,uBAAOC,eAAc,IAAIF;;IAEzB,uBAAOG;mBAAS,oBAAA,SAAOC,KAAcC,KAAeC;gBAE1CC,UACAC,gBAGCC;;;;;;;;;;wBAJDF,WAA0BH,IAAIM,IAAI;wBACX;;4BAAM,MAAKR,WAAW,CAACS,MAAM,CAACJ;;;wBAArDC,iBAAuB;wBAE7BH,IAAIO,MAAM,CAAC,KAAKC,IAAI,CAAC;4BAAEC,MAAMN;4BAAgBO,SAAS;wBAAS;;;;;;wBACxDN;wBACPH,KAAKG;;;;;;;;;;;QAET;wBATuBL,KAAcC,KAAeC;;;;;IAWpD,uBAAOU;mBAAQ,oBAAA,SAAOZ,KAAcC,KAAeC;gBAEzCC,UACuB,MAArBU,QAAQC,UAITT;;;;;;;;;;wBALDF,WAA0BH,IAAIM,IAAI;wBACX;;4BAAM,OAAKR,WAAW,CAACiB,KAAK,CAACZ;;;wBAA7B,OAAA,eAArBU,SAAqB,KAArBA,QAAQC,WAAa,KAAbA;wBAEhBb,IAAIe,SAAS,CAAC;4BAAeH;;wBAC7BZ,IAAIO,MAAM,CAAC,KAAKC,IAAI,CAAC;4BAAEC,MAAMI;4BAAUH,SAAS;wBAAQ;;;;;;wBACjDN;wBACPH,KAAKG;;;;;;;;;;;QAET;wBAVsBL,KAAcC,KAAeC;;;;;IAYnD,uBAAOe;mBAAS,oBAAA,SAAOjB,KAAsBC,KAAeC;gBAElDC,UACAe,gBAICb;;;;;;;;;;wBALDF,WAAiBH,IAAImB,IAAI;wBACF;;4BAAM,OAAKrB,WAAW,CAACsB,MAAM,CAACjB;;;wBAArDe,iBAAuB;wBAE7BjB,IAAIe,SAAS,CAAC;4BAAe;;wBAC7Bf,IAAIO,MAAM,CAAC,KAAKC,IAAI,CAAC;4BAAEC,MAAMQ;4BAAgBP,SAAS;wBAAS;;;;;;wBACxDN;wBACPH,KAAKG;;;;;;;;;;;QAET;wBAVuBL,KAAsBC,KAAeC;;;;;AAa9D,eAAeL,eAAe"}